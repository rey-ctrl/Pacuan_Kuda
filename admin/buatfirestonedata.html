<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Pendaftaran</title>
  <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-database-compat.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">

<h1 class="text-3xl font-bold mb-6 text-center text-teal-600">Data Pendaftaran</h1>

<div id="admin-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>

<script>
  // Konfigurasi Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyCblcjMeU5QqagwuiKEJT-vhiWOp715B1Y",
    authDomain: "cobacoba-f1ef5.firebaseapp.com",
    databaseURL: "https://cobacoba-f1ef5-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "cobacoba-f1ef5",
    storageBucket: "cobacoba-f1ef5.firebasestorage.app",
    messagingSenderId: "660636726018",
    appId: "1:660636726018:web:481d51fd27652afbd9c81b",
    measurementId: "G-NJPDFHG9M3"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const pendaftaranRef = db.ref("pendaftaran/");
  const container = document.getElementById("admin-container");

  pendaftaranRef.on("value", (snapshot) => {
    container.innerHTML = "";
    const data = snapshot.val();
    if (data) {
      Object.keys(data).forEach(key => {
        const item = data[key];
        const card = document.createElement("div");
        card.className = "bg-white p-4 rounded-lg shadow hover:shadow-lg transition duration-300";

        // buat isi card otomatis dari semua field
        let content = `<h2 class="text-xl font-semibold mb-2">${item.nama || "Tanpa Nama"}</h2>`;
        Object.keys(item).forEach(field => {
          if (field !== "nama") {
            if (field === "bukti") {
              content += `<p><strong>${field}:</strong> ${
                item[field] 
                  ? `<a href="${item[field]}" target="_blank" class="text-blue-500 underline">Lihat</a>` 
                  : "Belum ada"
              }</p>`;
            } else {
              content += `<p><strong>${field}:</strong> ${item[field]}</p>`;
            }
          }
        });

        card.innerHTML = content;
        container.appendChild(card);
      });
    } else {
      container.innerHTML = "<p class='col-span-full text-gray-500'>Belum ada pendaftaran.</p>";
    }
  });
</script>

</body>
</html>
